<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Promise</title>
</head>

<body>
<script src="index.js"></script>
<!-- <script>
  // 测试用例 1
  const p = new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(1)
      // reject(2)
    })
  })

  p.then(value => {
    console.log('onResolved()...1...', value)
  }, reason => {
    console.log('onRejected()...1...', reason)
  })

  p.then(value => {
    console.log('onResolved()...2...', value)
  }, reason => {
    console.log('onRejected()...2...', reason)
  })
</script> -->

<!-- <script>
  // 测试用例 2
  const p = new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(1)
      // reject(2)
      // throw new Error(7) // 异步异常暂时处理不了，todo...
    })
  }).then(value => {
    console.log('onResolved()...1...', value)
    throw new Error(6)
    // return new Promise((resolve,reject) => {
    //   // resolve(4)
    //   reject(5)
    // })
  }, reason => {
    console.log('onRejected()...1...', reason)
  }).then(value => {
    console.log('onResolved()...2...', value)
  }, reason => {
    console.log('onRejected()...2...', reason)
    throw new Error(8)
  }).catch(reason => {
    console.log('catch...', reason)
    return new Promise(() => {})
  }).then(value => {
    console.log('onResolved()...4...', value)
  }, reason => {
    console.log('onRejected()...4...', reason)
  })
</script> -->

<!-- <script>
  // 测试用例 3
  const p1 = Promise.resolve(1)
  const p2 = Promise.resolve(Promise.resolve(2))
  const p3 = Promise.resolve(Promise.reject(3))
  p1.then(value => {
    console.log(value)
  })

  p2.then(value => {
    console.log(value)
  })

  p3.catch(reason => {
    console.log(reason)
  })
</script> -->

<!-- <script>
  // 测试用例 4
  const p1 = Promise.resolve(1)
  const p2 = Promise.resolve(Promise.resolve(2))
  const p3 = Promise.resolve(Promise.reject(3))
  const p4 = Promise.reject(4)

  // Promise.all([p1, p2]).then(values => {
  //   console.log(values)
  // }).catch(reason => {
  //   console.log(reason)
  // })

  // Promise.all([p1, p2, p3]).then(values => {
  //   console.log(values)
  // }).catch(reason => {
  //   console.log(reason)
  // })

  // Promise.race([p1, p2, p3]).then(values => {
  //   console.log(values)
  // }).catch(reason => {
  //   console.log(reason)
  // })

  Promise.race([p3, p2, p1]).then(values => {
    console.log(values)
  }).catch(reason => {
    console.log(reason)
  })

  // Promise.race([p3, p4, p2, p1]).then(values => {
  //   console.log(values)
  // }).catch(reason => {
  //   console.log(reason)
  // })
</script> -->

<script>
  // 测试用例5
  const p = new Promise((resolve, reject) => {
    // resolve(1)
    reject(2)
  }).finally(result => {
    console.log('finally...', result)
  }).then(value => {
    console.log(value)
  }, reason => {
    console.log(reason)
  })

  // promise面试题：https://www.cnblogs.com/everlose/p/12950564.html
</script>
</body>

</html>
